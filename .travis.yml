language: python
python: 3.6
dist:
  - ubuntu

install:
  - pip install -r requirements.txt
  - pip install .
  - pip install pyinstaller

script:
  - pyinstaller -F --add-data pmserver/templates:pmserver/tempates serv.py
  - mv dist/serv dist/pmserver_ubuntu

deploy:
  provider: releases
  skip_cleanup: true
  api_key: $GITHUB_TOKEN
  file: dist/pmserver_ubuntu
  on:
    branch: master